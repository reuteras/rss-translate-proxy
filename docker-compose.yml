services:
  rss-translate-proxy:
    container_name: rss-translate-proxy
    build: .
    labels:
      - com.monitoring.enable=true
    ports:
      - "127.0.0.1:8086:8086"
    env_file:
      - .env
    volumes:
      - ./data:/app/data
      - ./config.yaml:/app/config.yaml:ro
  rss-translate-worker:
    container_name: rss-translate-worker
    build: .
    labels:
      - com.monitoring.enable=true
    command: ["python", "worker.py"]
    env_file:
      - .env
    volumes:
      - ./data:/app/data
      - ./config.yaml:/app/config.yaml:ro
  libretranslate:
    image: libretranslate/libretranslate:latest
    container_name: rss-translate-libretranslate
    labels:
      - com.monitoring.enable=true
    ports:
      - "127.0.0.1:5000:5000"
    environment:
      - LT_DISABLE_WEB_UI=true
      - LT_UPDATE_MODELS=true
      - LT_LOAD_ONLY=en,uk
      - LT_WORKERS=1
    volumes:
      - ./libretranslate-data:/home/libretranslate/.local/share
